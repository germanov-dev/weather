{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/germanov/dev/weather/context/AppContext.js\";\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport Image from 'next/image';\nexport const AppContext = /*#__PURE__*/createContext();\n\nconst AppWrapper = ({\n  children\n}) => {\n  const {\n    0: long,\n    1: setLong\n  } = useState(23.319941);\n  const {\n    0: lat,\n    1: setLat\n  } = useState(42.698334);\n  const {\n    0: search,\n    1: setSearch\n  } = useState('');\n  const {\n    0: query,\n    1: setQuery\n  } = useState('');\n  const {\n    0: dropdownItems,\n    1: setDropdownItems\n  } = useState([]);\n  const {\n    0: dropdownLoading,\n    1: setDropdownLoading\n  } = useState(false);\n  const {\n    0: units,\n    1: setUnits\n  } = useState('si');\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: countryName,\n    1: setCountryName\n  } = useState('');\n  const {\n    0: cityName,\n    1: setCityName\n  } = useState('');\n  const {\n    0: location,\n    1: setLocation\n  } = useState();\n  useEffect(() => {\n    if (!query == '') {\n      forwardGeocoding();\n    }\n  }, [query]);\n\n  const getUserLocation = () => {\n    navigator.geolocation.getCurrentPosition(position => {\n      setLong(position.coords.longitude);\n      setLat(position.coords.latitude);\n    });\n  };\n\n  const updateSearch = event => {\n    setSearch(event.target.value);\n  };\n\n  const getSearch = event => {\n    event.preventDefault();\n    setQuery(search);\n    setDropdownLoading(true);\n  };\n\n  const updateCheckbox = event => {\n    if (event.target.checked == true) {\n      setUnits('us');\n    } else {\n      setUnits('si');\n    }\n  };\n\n  const reverseGeocoding = async () => {\n    const reverseAPI = `https://api.opencagedata.com/geocode/v1/json?q=${lat}+${long}&key=d6d274c390434a5da83e82945466c21a`;\n    const response = await fetch(reverseAPI);\n\n    if (response.ok) {\n      const data = await response.json();\n\n      if (!data.results[0].components.city && !data.results[0].components.village) {\n        setCityName(data.results[0].components.town);\n        setCountryName(data.results[0].components.country);\n      }\n\n      if (!data.results[0].components.city && !data.results[0].components.town) {\n        setCityName(data.results[0].components.village);\n        setCountryName(data.results[0].components.country);\n      }\n\n      if (!data.results[0].components.town && !data.results[0].components.village) {\n        setCityName(data.results[0].components.city);\n        setCountryName(data.results[0].components.country);\n      }\n    }\n  };\n\n  const forwardGeocoding = async () => {\n    const forwardAPI = `https://api.opencagedata.com/geocode/v1/json?q=${query}&key=d6d274c390434a5da83e82945466c21a`;\n    const response = await fetch(forwardAPI);\n\n    if (response.ok) {\n      const data = await response.json();\n      const filteredResults = data.results.filter(result => result.components._type == 'town' || result.components._type == 'city' || result.components._type == 'village');\n      const newResults = filteredResults.filter(result => result.components.town != undefined || result.components.village != undefined || result.components.city != undefined);\n      setDropdownItems(newResults);\n      setDropdownLoading(false);\n    }\n  };\n\n  const weatherIcon = icon => {\n    switch (icon) {\n      case 'clear-day':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/clear-day.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 12\n        }, this);\n\n      case 'clear-night':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/clear-night.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 12\n        }, this);\n\n      case 'rain':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/rain.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 12\n        }, this);\n\n      case 'snow':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/snow.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 12\n        }, this);\n\n      case 'sleet':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/sleet.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 12\n        }, this);\n\n      case 'wind':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/wind.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 12\n        }, this);\n\n      case 'fog':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/fog.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 12\n        }, this);\n\n      case 'cloudy':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/cloudy.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 12\n        }, this);\n\n      case 'partly-cloudy-day':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/partly-cloudy-day.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 12\n        }, this);\n\n      case 'partly-cloudy-night':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/partly-cloudy-night.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 6\n        }, this);\n\n      case 'hail':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/hail.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 12\n        }, this);\n\n      case 'thunderstorm':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/thunderstorm.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 12\n        }, this);\n\n      case 'tornado':\n        return /*#__PURE__*/_jsxDEV(Image, {\n          src: \"/tornado.svg\",\n          width: 150,\n          height: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 12\n        }, this);\n\n      default:\n        return;\n    }\n  };\n\n  const formatTime = timestamp => {\n    const date = new Date(timestamp * 1000);\n    const hours = date.getHours();\n    let minutes = date.getMinutes();\n    minutes = minutes <= 9 ? `0${minutes}` : minutes;\n    return `${hours}:${minutes}`;\n  };\n\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      long,\n      setLong,\n      lat,\n      setLat,\n      search,\n      setSearch,\n      query,\n      setQuery,\n      getUserLocation,\n      updateSearch,\n      getSearch,\n      dropdownItems,\n      dropdownLoading,\n      setDropdownLoading,\n      units,\n      setUnits,\n      updateCheckbox,\n      loading,\n      setLoading,\n      countryName,\n      setCountryName,\n      cityName,\n      setCityName,\n      location,\n      setLocation,\n      weatherIcon,\n      reverseGeocoding,\n      formatTime\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 3\n  }, this);\n};\n\nexport default AppWrapper;","map":{"version":3,"sources":["/Users/germanov/dev/weather/context/AppContext.js"],"names":["createContext","useContext","useState","useEffect","Image","AppContext","AppWrapper","children","long","setLong","lat","setLat","search","setSearch","query","setQuery","dropdownItems","setDropdownItems","dropdownLoading","setDropdownLoading","units","setUnits","loading","setLoading","countryName","setCountryName","cityName","setCityName","location","setLocation","forwardGeocoding","getUserLocation","navigator","geolocation","getCurrentPosition","position","coords","longitude","latitude","updateSearch","event","target","value","getSearch","preventDefault","updateCheckbox","checked","reverseGeocoding","reverseAPI","response","fetch","ok","data","json","results","components","city","village","town","country","forwardAPI","filteredResults","filter","result","_type","newResults","undefined","weatherIcon","icon","formatTime","timestamp","date","Date","hours","getHours","minutes","getMinutes"],"mappings":"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","sourcesContent":["import { createContext, useContext, useState, useEffect } from 'react';\nimport Image from 'next/image';\n\nexport const AppContext = createContext();\n\nconst AppWrapper = ({ children }) => {\n\tconst [long, setLong] = useState(23.319941);\n\tconst [lat, setLat] = useState(42.698334);\n\tconst [search, setSearch] = useState('');\n\tconst [query, setQuery] = useState('');\n\tconst [dropdownItems, setDropdownItems] = useState([]);\n\tconst [dropdownLoading, setDropdownLoading] = useState(false);\n\tconst [units, setUnits] = useState('si');\n\tconst [loading, setLoading] = useState(true);\n\tconst [countryName, setCountryName] = useState('');\n\tconst [cityName, setCityName] = useState('');\n\tconst [location, setLocation] = useState();\n\n\tuseEffect(() => {\n\t\tif (!query == '') {\n\t\t\tforwardGeocoding();\n\t\t}\n\t}, [query]);\n\n\tconst getUserLocation = () => {\n\t\tnavigator.geolocation.getCurrentPosition((position) => {\n\t\t\tsetLong(position.coords.longitude);\n\t\t\tsetLat(position.coords.latitude);\n\t\t});\n\t};\n\n\tconst updateSearch = (event) => {\n\t\tsetSearch(event.target.value);\n\t};\n\n\tconst getSearch = (event) => {\n\t\tevent.preventDefault();\n\t\tsetQuery(search);\n\t\tsetDropdownLoading(true);\n\t};\n\n\tconst updateCheckbox = (event) => {\n\t\tif (event.target.checked == true) {\n\t\t\tsetUnits('us');\n\t\t} else {\n\t\t\tsetUnits('si');\n\t\t}\n\t};\n\n\tconst reverseGeocoding = async () => {\n\t\tconst reverseAPI = `https://api.opencagedata.com/geocode/v1/json?q=${lat}+${long}&key=d6d274c390434a5da83e82945466c21a`;\n\t\tconst response = await fetch(reverseAPI);\n\n\t\tif (response.ok) {\n\t\t\tconst data = await response.json();\n\n\t\t\tif (\n\t\t\t\t!data.results[0].components.city &&\n\t\t\t\t!data.results[0].components.village\n\t\t\t) {\n\t\t\t\tsetCityName(data.results[0].components.town);\n\t\t\t\tsetCountryName(data.results[0].components.country);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!data.results[0].components.city &&\n\t\t\t\t!data.results[0].components.town\n\t\t\t) {\n\t\t\t\tsetCityName(data.results[0].components.village);\n\t\t\t\tsetCountryName(data.results[0].components.country);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!data.results[0].components.town &&\n\t\t\t\t!data.results[0].components.village\n\t\t\t) {\n\t\t\t\tsetCityName(data.results[0].components.city);\n\t\t\t\tsetCountryName(data.results[0].components.country);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst forwardGeocoding = async () => {\n\t\tconst forwardAPI = `https://api.opencagedata.com/geocode/v1/json?q=${query}&key=d6d274c390434a5da83e82945466c21a`;\n\t\tconst response = await fetch(forwardAPI);\n\n\t\tif (response.ok) {\n\t\t\tconst data = await response.json();\n\n\t\t\tconst filteredResults = data.results.filter(\n\t\t\t\t(result) =>\n\t\t\t\t\tresult.components._type == 'town' ||\n\t\t\t\t\tresult.components._type == 'city' ||\n\t\t\t\t\tresult.components._type == 'village'\n\t\t\t);\n\n\t\t\tconst newResults = filteredResults.filter(\n\t\t\t\t(result) =>\n\t\t\t\t\tresult.components.town != undefined ||\n\t\t\t\t\tresult.components.village != undefined ||\n\t\t\t\t\tresult.components.city != undefined\n\t\t\t);\n\n\t\t\tsetDropdownItems(newResults);\n\t\t\tsetDropdownLoading(false);\n\t\t}\n\t};\n\n\tconst weatherIcon = (icon) => {\n\t\tswitch (icon) {\n\t\t\tcase 'clear-day':\n\t\t\t\treturn <Image src='/clear-day.svg' width={150} height={150} />;\n\t\t\tcase 'clear-night':\n\t\t\t\treturn <Image src='/clear-night.svg' width={150} height={150} />;\n\t\t\tcase 'rain':\n\t\t\t\treturn <Image src='/rain.svg' width={150} height={150} />;\n\t\t\tcase 'snow':\n\t\t\t\treturn <Image src='/snow.svg' width={150} height={150} />;\n\t\t\tcase 'sleet':\n\t\t\t\treturn <Image src='/sleet.svg' width={150} height={150} />;\n\t\t\tcase 'wind':\n\t\t\t\treturn <Image src='/wind.svg' width={150} height={150} />;\n\t\t\tcase 'fog':\n\t\t\t\treturn <Image src='/fog.svg' width={150} height={150} />;\n\t\t\tcase 'cloudy':\n\t\t\t\treturn <Image src='/cloudy.svg' width={150} height={150} />;\n\t\t\tcase 'partly-cloudy-day':\n\t\t\t\treturn <Image src='/partly-cloudy-day.svg' width={150} height={150} />;\n\t\t\tcase 'partly-cloudy-night':\n\t\t\t\treturn (\n\t\t\t\t\t<Image src='/partly-cloudy-night.svg' width={150} height={150} />\n\t\t\t\t);\n\t\t\tcase 'hail':\n\t\t\t\treturn <Image src='/hail.svg' width={150} height={150} />;\n\t\t\tcase 'thunderstorm':\n\t\t\t\treturn <Image src='/thunderstorm.svg' width={150} height={150} />;\n\t\t\tcase 'tornado':\n\t\t\t\treturn <Image src='/tornado.svg' width={150} height={150} />;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t};\n\n\tconst formatTime = (timestamp) => {\n\t\tconst date = new Date(timestamp * 1000);\n\t\tconst hours = date.getHours();\n\t\tlet minutes = date.getMinutes();\n\n\t\tminutes = minutes <= 9 ? `0${minutes}` : minutes;\n\n\t\treturn `${hours}:${minutes}`;\n\t};\n\n\treturn (\n\t\t<AppContext.Provider\n\t\t\tvalue={{\n\t\t\t\tlong,\n\t\t\t\tsetLong,\n\t\t\t\tlat,\n\t\t\t\tsetLat,\n\t\t\t\tsearch,\n\t\t\t\tsetSearch,\n\t\t\t\tquery,\n\t\t\t\tsetQuery,\n\t\t\t\tgetUserLocation,\n\t\t\t\tupdateSearch,\n\t\t\t\tgetSearch,\n\t\t\t\tdropdownItems,\n\t\t\t\tdropdownLoading,\n\t\t\t\tsetDropdownLoading,\n\t\t\t\tunits,\n\t\t\t\tsetUnits,\n\t\t\t\tupdateCheckbox,\n\t\t\t\tloading,\n\t\t\t\tsetLoading,\n\t\t\t\tcountryName,\n\t\t\t\tsetCountryName,\n\t\t\t\tcityName,\n\t\t\t\tsetCityName,\n\t\t\t\tlocation,\n\t\t\t\tsetLocation,\n\t\t\t\tweatherIcon,\n\t\t\t\treverseGeocoding,\n\t\t\t\tformatTime\n\t\t\t}}>\n\t\t\t{children}\n\t\t</AppContext.Provider>\n\t);\n};\n\nexport default AppWrapper;\n"]},"metadata":{},"sourceType":"module"}